(function(a){a.fn.countDown=function(b){config={};a.extend(config,b);diffSecs=this.setCountDown(config);if(config.onComplete){a.data(a(this)[0],"callback",config.onComplete)}if(config.omitWeeks){a.data(a(this)[0],"omitWeeks",config.omitWeeks)}a("#"+a(this).attr("id")+" .digit").html('<div class="top"></div><div class="bottom"></div>');a(this).doCountDown(a(this).attr("id"),diffSecs,500);return this};a.fn.stopCountDown=function(){clearTimeout(a.data(this[0],"timer"))};a.fn.startCountDown=function(){this.doCountDown(a(this).attr("id"),a.data(this[0],"diffSecs"),500)};a.fn.setCountDown=function(b){var c=new Date;if(b.targetDate){c=new Date(b.targetDate.month+"/"+b.targetDate.day+"/"+b.targetDate.year+" "+b.targetDate.hour+":"+b.targetDate.min+":"+b.targetDate.sec+(b.targetDate.utc?" UTC":""))}else if(b.targetOffset){c.setFullYear(b.targetOffset.year+c.getFullYear());c.setMonth(b.targetOffset.month+c.getMonth());c.setDate(b.targetOffset.day+c.getDate());c.setHours(b.targetOffset.hour+c.getHours());c.setMinutes(b.targetOffset.min+c.getMinutes());c.setSeconds(b.targetOffset.sec+c.getSeconds())}var d=new Date;diffSecs=Math.floor((c.valueOf()-d.valueOf())/1e3);a.data(this[0],"diffSecs",diffSecs);return diffSecs};a.fn.doCountDown=function(b,c,d){$this=a("#"+b);if(c<=0){c=0;if(a.data($this[0],"timer")){clearTimeout(a.data($this[0],"timer"))}}secs=c%60;mins=Math.floor(c/60)%60;hours=Math.floor(c/60/60)%24;if(a.data($this[0],"omitWeeks")==true){days=Math.floor(c/60/60/24);weeks=Math.floor(c/60/60/24/7)}else{days=Math.floor(c/60/60/24)%7;weeks=Math.floor(c/60/60/24/7)}$this.dashChangeTo(b,"seconds_dash",secs,d?d:800);$this.dashChangeTo(b,"minutes_dash",mins,d?d:1200);$this.dashChangeTo(b,"hours_dash",hours,d?d:1200);$this.dashChangeTo(b,"days_dash",days,d?d:1200);$this.dashChangeTo(b,"weeks_dash",weeks,d?d:1200);a.data($this[0],"diffSecs",c);if(c>0){e=$this;t=setTimeout(function(){e.doCountDown(b,c-1)},1e3);a.data(e[0],"timer",t)}else if(cb=a.data($this[0],"callback")){a.data($this[0],"callback")()}};a.fn.dashChangeTo=function(b,c,d,e){$this=a("#"+b);for(var f=$this.find("."+c+" .digit").length-1;f>=0;f--){var g=d%10;d=(d-g)/10;$this.digitChangeTo("#"+$this.attr("id")+" ."+c+" .digit:eq("+f+")",g,e)}};a.fn.digitChangeTo=function(b,c,d){if(!d){d=800}if(a(b+" div.top").html()!=c+""){a(b+" div.top").css({display:"none"});a(b+" div.top").html(c?c:"0").slideDown(d);a(b+" div.bottom").animate({height:""},d,function(){a(b+" div.bottom").html(a(b+" div.top").html());a(b+" div.bottom").css({display:"block",height:""});a(b+" div.top").hide().slideUp(10)})}}})(jQuery)